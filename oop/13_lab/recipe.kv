<RecipeManager>:
    MainScreen:
        name: 'main'
    AddRecipeScreen:
        name: 'add'
    ViewRecipeScreen:
        name: 'view'

<MainScreen>:
    recipe_list: recipe_list
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15
        
        Label:
            text: 'Моя книга рецептов'
            font_size: '24sp'
            bold: True
            color: COLOR_PRIMARY
            size_hint_y: 0.15
        
        ScrollView:
            GridLayout:
                id: recipe_list
                cols: 1
                spacing: 10
                size_hint_y: None
                height: self.minimum_height
        
        RoundedButton:
            text: 'Добавить рецепт'
            on_press: root.manager.current = 'add'

<AddRecipeScreen>:
    title_input: title_input
    ingredients_input: ingredients_input
    instructions_input: instructions_input
    
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15
        
        Label:
            text: 'Новый рецепт'
            font_size: '24sp'
            bold: True
            color: COLOR_PRIMARY
        
        InputField:
            id: title_input
            hint_text: 'Название рецепта'
        
        InputField:
            id: ingredients_input
            hint_text: 'Ингредиенты (через запятую)'
            multiline: True
        
        InputField:
            id: instructions_input
            hint_text: 'Инструкция приготовления'
            multiline: True
        
        BoxLayout:
            spacing: 10
            size_hint_y: 0.15
            
            RoundedButton:
                text: 'Сохранить'
                on_press: root.save_recipe()
            
            RoundedButton:
                text: 'Отмена'
                on_press: 
                    root.reset_form()
                    root.manager.current = 'main'

<ViewRecipeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15
        
        Label:
            text: root.title
            font_size: '24sp'
            bold: True
            color: COLOR_PRIMARY
            size_hint_y: 0.15
        
        ScrollView:
            GridLayout:
                cols: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 15
                
                Label:
                    text: 'Ингредиенты:'
                    bold: True
                    color: COLOR_PRIMARY
                
                Label:
                    text: root.ingredients
                    text_size: self.width, None
                
                Label:
                    text: 'Инструкция:'
                    bold: True
                    color: COLOR_PRIMARY
                
                Label:
                    text: root.instructions
                    text_size: self.width, None
        
        RoundedButton:
            text: 'Назад'
            on_press: root.manager.current = 'main'

<RoundedButton@Button>:
    background_normal: ''
    background_color: (0,0,0,0)
    color: COLOR_SECONDARY
    bold: True
    canvas.before:
        Color:
            rgba: COLOR_PRIMARY
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15]

<InputField@TextInput>:
    multiline: False
    padding: 10
    size_hint_y: None
    height: 40
    background_normal: ''
    background_color: (1,1,1,1)
    foreground_color: (0,0,0,1)
    cursor_color: COLOR_PRIMARY
    hint_text_color: (0.5,0.5,0.5,1)
    canvas.before:
        Color:
            rgba: COLOR_PRIMARY
        Line:
            rounded_rectangle: [self.x, self.y, self.width, self.height, 10]
            width: 2

<RecipeButton>:
    source: 'data/btn_bg.png'  # Можно добавить фоновое изображение
    color: COLOR_PRIMARY
    Label:
        text: root.text
        font_size: '18sp'
        bold: True
        color: root.color
        halign: 'center'
        valign: 'middle'
        size: root.size
        pos: root.pos
        text_size: root.size